alias: Doorbell Snapshot to Slack
description: >
  When the doorbell is pressed, take a snapshot from the camera,
  copy it to the Mac Mini, and upload it to Slack via Python script.
triggers:
  - entity_id: binary_sensor.doorbell_doorbell
    from: "off"
    to: "on"
    trigger: state
actions:
  - data:
      entity_id: camera.doorbell_high_resolution_channel
      filename: /config/www/doorbell_latest.jpg
    action: camera.snapshot
  - delay:
      seconds: 2
  - action: shell_command.copy_snapshot_to_mac
  - delay:
      seconds: 1
  - action: shell_command.run_doorbell_uploader
mode: single
